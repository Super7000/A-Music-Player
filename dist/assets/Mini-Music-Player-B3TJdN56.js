import{u as m,j as s,r,a as j,s as d}from"./index-CbrezAOz.js";import{M as N}from"./Thumbnail-u5_CHvno.js";const L=()=>{const t=m(n=>n.audio.audioThumbnailSrc);return s.jsxs("div",{className:"mini-music-player",children:[s.jsx(N,{thumbnail:t,createDot:!0}),s.jsx(y,{}),s.jsx(E,{})]})},y=r.memo(()=>{const t=m(c=>c.audio.audioName),n=m(c=>c.audio.audioArtist);return s.jsxs("div",{className:"music-details",children:[s.jsx("div",{className:"music-name",children:t.length>14?t.slice(0,11)+"..":t}),s.jsx("div",{className:"music-author",children:n})]})}),E=r.memo(()=>{const t=j(),n=m(a=>a.audio.audioSrc),c=m(a=>a.audio.isPlaying),e=r.useRef(new Audio("./Audio/Way Back Home.mp3")),[l,o]=r.useState(!1),[i,u]=r.useState("./Icons/volume.svg"),[p,f]=r.useState(0),[x,g]=r.useState(0);r.useEffect(()=>{e.current.pause(),e.current.src=null,e.current=new Audio(n),e.current.play()},[n]),r.useEffect(()=>(e.current.addEventListener("ended",()=>{l?(e.current.play(),t(d(!0))):(e.current.pause(),t(d(!1)))}),e.current.addEventListener("play",()=>{t(d(!0))}),e.current.addEventListener("pause",()=>{t(d(!1))}),e.current.addEventListener("loadedmetadata",()=>{f(e.current.duration)}),e.current.addEventListener("timeupdate",()=>{g(e.current.currentTime)}),()=>{e.current.removeEventListener("ended",()=>{}),e.current.removeEventListener("play",()=>{}),e.current.removeEventListener("pause",()=>{}),e.current.removeEventListener("metadata",()=>{}),e.current.removeEventListener("timeupdate",()=>{})}),[n,e.current,l]);function h(){e.current.paused?e.current.play():e.current.pause()}function v(a){e.current.currentTime+=a}return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"music-control-container",children:[s.jsx(C,{duration:p,currentTime:x,onSeek:a=>{e.current.currentTime=a}}),s.jsxs("div",{className:"music-controls",children:[s.jsx("img",{src:i,alt:"",className:"music-control",onClick:()=>{e.current.volume<=0?(u("./Icons/volume.svg"),e.current.volume=1):(u("./Icons/volume-mute.svg"),e.current.volume=0)}}),s.jsx("img",{src:"./Icons/fast-backward.svg",alt:"",className:"music-control",onClick:()=>{v(-10)}}),s.jsx("img",{src:c?"./Icons/Pause.svg":"./Icons/Play.svg",alt:"",className:"music-control",onClick:h}),s.jsx("img",{src:"./Icons/fast-forward.svg",alt:"",className:"music-control",onClick:()=>{v(10)}}),s.jsx("img",{src:l?"./Icons/arrow-repeat-all.svg":"./Icons/arrow-repeat-all-off.svg",alt:"",className:"music-control",style:{width:"15px",height:"15px",position:"relative",top:"-1.5px"},onClick:()=>{o(a=>!a)}})]})]})})}),C=r.memo(({duration:t=0,currentTime:n=0,onSeek:c=()=>{}})=>{const e=r.useCallback(o=>{let i=Math.floor(o/60)||0,u=Math.floor(o%60)||0;return`${i}:${u}`},[]);function l(o){const i=o.currentTarget,u=o.clientX-i.getBoundingClientRect().left;c(Math.floor(u/i.offsetWidth*t))}return s.jsxs("div",{className:"progress-container",children:[s.jsx("div",{className:"current-duration duration",children:e(n)}),s.jsx("div",{className:"progress-bar",onClick:l,children:s.jsx("div",{className:"current-progress",style:{width:n/t*100+"%"}})}),s.jsx("div",{className:"total-duration duration",children:e(t)})]})});export{L as default};
